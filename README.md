# PORTING KOHERON SERVER TO OTHER DEVICES

Sometimes it is too complicated to port a given board to a koheron SDK. for those cases, it is just easier to take the 
koheron-server stack to the device.  

Supports Zynq and ZynqMP

Contains the client side python and cpp drivers

## Requirements
1. in order to run the python client, one needs to install the koheron python module
``` 
 sudo apt install -y g++-5-arm-linux-gnueabihf                                         
 sudo apt install -y g++-5-aarch64-linux-gnu                                           
 sudo apt install -y python-pip                                                        
 sudo apt install -y curl                                                              
 pip install -r requirements.txt                                        
 pip install python
```

## Limitations
1. does not support koheron welcome webpage for the device
2. does not support loading of instrument from python test scripts

## Procedure to compile server
1. Prepare a config.yml file to the which contains the list of control_registers, status_registers, parametes, drivers and memory tags. The memory tags must correspond to the Address Map on the actual device

2. Make autogenerated files needed.
``` 
make CONFIG=python server
```

3. Prepare the build directory and make the software
```
mkdir build
cd build
cmake ../ -DCMAKE_TOOLCHAIN_FILE=../toolchain-zynq.cmake 
make -j8
```

## Procedure to compile cpp client
Todo .. works. will add cmake file to compilation


## Procedure to port control and status ip
Todo .. for now import the cores manually (add the control and status registers to an existing supported device; save the block design as tcl, copy the relavent status and control hierarchy to your design.)
